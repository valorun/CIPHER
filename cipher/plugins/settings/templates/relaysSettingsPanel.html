<script src="{{ url_for('settings.static', filename='js/relaysSettingsController.js') }}"></script>

<div class="accordion">
	<header class="accordion-header">
        <i class="accordion-icon"></i> Ajouter un relai
    </header>
    <div class="accordion-content">
        <div class="parameter-row">
            <div class="parameter-wrapper">
                <label for="new-relay-label">Label: </label>
                <input id="new-relay-label" type="text" value="">
            </div>
            <div class="parameter-wrapper">
                <label for="new-relay-pin">Pin: </label>
                <input id="new-relay-pin" type="text" value="">
            </div>
            <div class="parameter-wrapper">
                <label for="new-relay-parity">Parité: </label>
                <input id="new-relay-parity" type="text" value="">
            </div>
            <div class="parameter-wrapper">
                <label for="new-relay-raspi-id">Raspberry: </label>
                <input id="new-relay-raspi-id" type="text" value="" list="available-raspies">
            </div>
        </div>
        <input id="add-relay" type="button" value="Ajouter">
    </div>
</div>


<div class="accordion">
	<header class="accordion-header">
        <i class="accordion-icon"></i> Relais enregistrés
    </header>
    <div class="accordion-content">
        <table id="relays-table">
            <tr>
                <th>Label</th>
                <th>Pin</th>
                <th>Parité</th>
                <th>Raspberry</th>
            </tr>
            {% for r in relays %}
            <tr data-label="{{ r.label }}">
                <td><input type="text" class="relay-label" value="{{ r.label }}"></td>
                <td><input type="number" class="relay-pin" value="{{ r.pin }}"></td>
                <td><input type="text" class="relay-parity" value="{{ r.parity }}"></td>
                <td>
                    <input type="text" class="relay-raspi" value="{{ r.raspi_id }}" list="availableRaspies">
                </td>
                <td>
                    {% if r.enabled==True %}
                    <input class="relay-enable" id="relay-{{ r.label }}-enable" type="checkbox" checked="checked">
                    {% else %}
                    <input class="relay-enable" id="relay-{{ r.label }}-enable" type="checkbox">
                    {% endif %}
                    <label for="relay-{{ r.label }}-enable">activé</label>
                </td>
                <td>
                    <button class="relay-delete"><i
                            class="fas fa-trash"></i></button>
                </td>
                <td>
                    <button class="relay-save"><i class="fas fa-save"></i></button>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        relaysSettingsController.init();
    });
</script>